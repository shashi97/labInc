<p-growl [(value)]="errorMsg" [immutable]="false" life="7000"></p-growl>
<div class="flex-block site-content">
  <testing-menu-left-navbar></testing-menu-left-navbar>
  <div class="main-content">
    <div class="content" scroll-bar>
      <error></error>
      <div class="flex-block edit-mode">
        <div class="titled-block block grow-50 m-r-20">
          <div class="title">{{action}} Testing Menu</div>
          <div class="content-block flex-block grow-1">
            <div class="labeled-block block grow-50 offset-right">
              <div class="label ">Class Type</div>
              <div class="value">
                <p-radioButton label="Drug" value="Drug" [(ngModel)]="selectedValue" (click)="getDrugs(true)"></p-radioButton>
              </div>
            </div>
            <div class="labeled-block block grow-50 offset-right" style="margin-top:3%;">
              <div class="value">
                <p-radioButton label="Test" value="Test" [(ngModel)]="selectedValue" (click)="getDrugs(true)"></p-radioButton>
              </div>
            </div>
          </div>
          <div class="content-block flex-block grow-1" >
            <div class="labeled-block offset-right block grow-100">
              <div class="label required " *ngIf="selectedValue=='Drug'">Analyte Name</div>
              <div class="label required" *ngIf="selectedValue=='Test'">Test Name</div>
              <div class="value">
                <input type="text" #nameValidate="ngModel" required [(ngModel)]="testingMenu.ItemName" class="field" />
              </div>
              <div [hidden]="nameValidate.valid || nameValidate.untouched">
                <div *ngIf="nameValidate.errors && nameValidate.errors.required" class="text-danger">
                  <div *ngIf="selectedValue=='Drug'">Analyte Name is required</div>
                  <div *ngIf="selectedValue=='Test'">Test Name is required</div>
                </div>
              </div>
            </div>
          </div>

          <div class="content-block flex-block grow-1">
            <div class="labeled-block offset-right block grow-100">
              <div class="label required">{{selectedValue}} Class</div>
              <div class="value">
                <p-dropdown placeholder="Please Select" appendTo="body" [filter]="true" [options]="drugs" [(ngModel)]="testingMenu.DrugClassId"></p-dropdown>
              </div>
            </div>
          </div>
          
          <div class="content-block flex-block grow-1">
            <div class="labeled-block offset-right block grow-100">
              <div class="label required">CMS Drug Class</div>
              <div class="value">
                <p-dropdown placeholder="Please Select" appendTo="body" [filter]="true" [options]="drugFamilies" [(ngModel)]="testingMenu.DrugFamilyId"></p-dropdown>
              </div>
            </div>
          </div>
          <div class="content-block flex-block flex-wrap grow-1">
            <div class="labeled-block block grow-50 offset-right">
              <div class="label">Testing Type</div>
              <div class="value">
                <p-radioButton label="Test Screen" value="1" [(ngModel)]="testingMenu.TestingType"></p-radioButton>
              </div>
            </div>
            <div class="labeled-block block grow-50 offset-right" style="margin-top:3%;">
              <div class="value">
                <p-radioButton label="Validity Testing" value="2" [(ngModel)]="testingMenu.TestingType"></p-radioButton>
              </div>
            </div>
          </div>
        </div>
        <div class="titled-block block grow-50 m-r-20">
          <div class="title">Testing Menu</div>
          <div class="content-block flex-block grow-1">
            <div class="labeled-block offset-right block grow-100">
              <div class="label ">Test Class Type</div>
              <div class="value">
                <p-dropdown placeholder="Please Select" appendTo="body" [filter]="true" [options]="TestClassTypes" [(ngModel)]="testingMenu.TestClassTypeId"></p-dropdown>
              </div>
            </div>
          </div>
          <div class="content-block flex-block grow-1" >
            <div class="labeled-block offset-right block grow-100">
              <div class="label ">Test Modality</div>
              <div class="value">
                <p-dropdown placeholder="Please Select" appendTo="body" [filter]="true" [options]="TestModalities" [(ngModel)]="testingMenu.TestModalityId"></p-dropdown>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer class="footer site-container">
    <div class="flex-block space-between">
      <div class="flex-block">
        <!--pagination here-->
      </div>
      <div class="flex-block block">
        <a class="btn btn-light h-50 m-l-20" (click)="save()">Save</a>
        <a class="btn btn-light h-50 m-l-20" (click)="cancel()">Cancel</a>
      </div>
    </div>
  </footer>
</div>